# BSER Cache Proxy

âš¡ **ê³ ì„±ëŠ¥ BSER API ìºì‹œ í”„ë¡ì‹œ ì„œë²„**

Black Survival: Eternal Return ê²Œì„ ë°ì´í„°ë¥¼ ë¹ ë¥´ê³  ì•ˆì •ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” í”„ë¡ì‹œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” íŠ¹ì§•

- ğŸš€ **ì´ˆê³ ì† ì‘ë‹µ**: ìºì‹œë¥¼ í†µí•œ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ ì‘ë‹µ ì‹œê°„
- ğŸ›¡ï¸ **ì•ˆì •ì„± ë³´ì¥**: Circuit Breakerì™€ Queue ì‹œìŠ¤í…œìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤
- ğŸ“Š **ì™„ì „ í˜¸í™˜**: ì›ë³¸ BSER APIì™€ 100% í˜¸í™˜ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤
- ğŸ”’ **ë³´ì•ˆ ê°•í™”**: ì¸ì¦ ë¶ˆí•„ìš”, ë³´ì•ˆ í—¤ë” ìë™ ì ìš©
- ğŸ“ˆ **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: ìºì‹œ íˆíŠ¸ìœ¨, ì„±ëŠ¥ ì§€í‘œ ì œê³µ

## ğŸ¯ ì§€ì› ê¸°ëŠ¥

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| ğŸ‘¤ ìœ ì € ì¡°íšŒ | âœ… | ë‹‰ë„¤ì„ìœ¼ë¡œ ìœ ì € ì •ë³´ ê²€ìƒ‰ |
| ğŸ† ë­í‚¹ ì‹œìŠ¤í…œ | âœ… | ìƒìœ„ ë­ì»¤ ë° ê°œì¸ ë­í‚¹ ì¡°íšŒ |
| ğŸ“Š í†µê³„ ë°ì´í„° | âœ… | ì‹œì¦Œë³„ ìœ ì € í†µê³„ ë¶„ì„ |
| ğŸ® ê²Œì„ ê¸°ë¡ | âœ… | ìµœê·¼ 90ì¼ ê²Œì„ ì „ì  |
| ğŸ—ƒï¸ ë©”íƒ€ ë°ì´í„° | âœ… | ìºë¦­í„°, ì•„ì´í…œ, ëª¬ìŠ¤í„° ì •ë³´ |
| ğŸŒ ë‹¤êµ­ì–´ ì§€ì› | âœ… | 15ê°œ ì–¸ì–´ ë°ì´í„° ì œê³µ |
| ğŸ—¡ï¸ ë¬´ê¸° ë£¨íŠ¸ | âœ… | ì»¤ë®¤ë‹ˆí‹° ì¶”ì²œ ë¹Œë“œ |

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì„œë¹„ìŠ¤ URL
```
https://your-domain.com
```

### ê¸°ë³¸ ì‚¬ìš©ë²•
```bash
# ìœ ì € ì •ë³´ ì¡°íšŒ
curl "https://your-domain.com/user/nickname?nickname=kimint"

# ìƒìœ„ ë­ì»¤ ì¡°íšŒ  
curl "https://your-domain.com/v1/rank/top/3/1"

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
curl "https://your-domain.com/health"
```

### ì‘ë‹µ ì˜ˆì‹œ
```json
{
  "code": 200,
  "message": "Success", 
  "user": {
    "userNum": 431380,
    "nickname": "kimint"
  }
}
```

## ğŸ“š API ë¬¸ì„œ

### ğŸ“– ìƒì„¸ API ê°€ì´ë“œ
**[â¡ï¸ API_REFERENCE.md](./API_REFERENCE.md)** - ì™„ì „í•œ API ì‚¬ìš© ê°€ì´ë“œ

### ğŸ”— ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | ì˜ˆì‹œ |
|------------|------|------|
| `GET /user/nickname?nickname={name}` | ìœ ì € ì •ë³´ ì¡°íšŒ | `/user/nickname?nickname=kimint` |
| `GET /v1/rank/top/{season}/{mode}` | ìƒìœ„ ë­ì»¤ | `/v1/rank/top/3/1` |
| `GET /rank/{userNum}/{season}/{mode}` | ìœ ì € ë­í‚¹ | `/rank/431380/3/1` |
| `GET /user/stats/{userNum}/{season}` | ìœ ì € í†µê³„ | `/user/stats/431380/3` |
| `GET /user/games/{userNum}` | ê²Œì„ ê¸°ë¡ | `/user/games/431380` |
| `GET /v2/data/{type}` | ë©”íƒ€ ë°ì´í„° | `/v2/data/Character` |
| `GET /health` | ì„œë¹„ìŠ¤ ìƒíƒœ | `/health` |
| `GET /stats` | ì‹œìŠ¤í…œ í†µê³„ | `/stats` |

### âš¡ ì„±ëŠ¥ ì§€í‘œ

- **ì‘ë‹µ ì‹œê°„**: í‰ê·  6-8ms (ìºì‹œ íˆíŠ¸ ì‹œ)
- **ì²˜ë¦¬ëŸ‰**: ì´ˆë‹¹ 3,000+ ìš”ì²­
- **ê°€ìš©ì„±**: 99.9% ì—…íƒ€ì„ ë³´ì¥
- **ìºì‹œ íš¨ìœ¨**: 70%+ íˆíŠ¸ìœ¨

### ğŸš¦ Rate Limiting

```http
RateLimit-Policy: 300;w=60
RateLimit-Limit: 300
RateLimit-Remaining: 287
RateLimit-Reset: 48
```

### ğŸ’¾ ìºì‹œ ì •ì±… (ì „ì ê²€ìƒ‰ ìµœì í™” - ì‹¤ì‹œê°„ì„± ê°•í™”)

| ë°ì´í„° íƒ€ì… | TTL | ì„¤ëª… |
|-------------|-----|------|
| ê²Œì„ ê¸°ë¡ | 3ë¶„ | ê²Œì„ ì§í›„ + API ë°˜ì˜ ì‹œê°„ ê³ ë ¤ |
| ìœ ì € í†µê³„ | 5ë¶„ | ì‹œì¦Œ í†µê³„ ë°ì´í„° |
| ìœ ì € ì •ë³´ | 5ë¶„ | ë‹‰ë„¤ì„, ê¸°ë³¸ ì •ë³´ |
| ë­í‚¹ ë°ì´í„° | 5ë¶„ | ì‹¤ì‹œê°„ ìˆœìœ„ ë°˜ì˜ |
| ë©”íƒ€ ë°ì´í„° | 30ë¶„ | ìºë¦­í„°, ì•„ì´í…œ |

## ğŸ› ï¸ ê°œë°œì ê°€ì´ë“œ

### í™˜ê²½ ì„¤ì •

#### Docker Compose (ê¶Œì¥)
```bash
# í”„ë¡œë•ì…˜ ë°°í¬
docker-compose up -d

# ê°œë°œ í™˜ê²½ 
docker-compose -f docker-compose.yml up -d
```

#### ìˆ˜ë™ ì„¤ì¹˜
```bash
npm install
cp .env.example .env
npm start
```

## ğŸ“Š ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§

### ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```bash
curl "https://your-domain.com/health"
```

### ì‹œìŠ¤í…œ í†µê³„
```bash
curl "https://your-domain.com/stats"
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "cache": {
    "memory": {
      "hits": 245,
      "misses": 38,
      "keys": 12
    }
  },
  "queue": {
    "waiting": 0,
    "active": 1,
    "completed": 1847
  },
  "circuitBreaker": {
    "bser-api": {
      "state": "CLOSED",
      "successRate": 98.5
    }
  }
}
```

## ğŸ® ì‚¬ìš© ì‚¬ë¡€

### ê²Œì„ í†µê³„ ì›¹ì‚¬ì´íŠ¸
```javascript
// ìœ ì € ê²€ìƒ‰ ê¸°ëŠ¥
async function searchUser(nickname) {
  const response = await fetch(`/user/nickname?nickname=${nickname}`);
  const data = await response.json();
  
  if (data.code === 200) {
    return data.user;
  } else {
    throw new Error(data.message);
  }
}

// ë­í‚¹ í‘œì‹œ
async function getTopPlayers(season = 3) {
  const response = await fetch(`/v1/rank/top/${season}/1`);
  const data = await response.json();
  return data.topRanks;
}
```

### ê²Œì„ ë´‡/ë„êµ¬
```python
import requests

class BSERClient:
    def __init__(self, base_url="https://your-domain.com"):
        self.base_url = base_url
    
    def get_user_stats(self, nickname):
        # ìœ ì € ë²ˆí˜¸ ì¡°íšŒ
        user_data = requests.get(
            f"{self.base_url}/user/nickname",
            params={"nickname": nickname}
        ).json()
        
        if user_data["code"] != 200:
            return None
            
        user_num = user_data["user"]["userNum"]
        
        # í†µê³„ ì¡°íšŒ
        stats = requests.get(
            f"{self.base_url}/user/stats/{user_num}/3"
        ).json()
        
        return stats
```

## â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q: ì¸ì¦ì´ í•„ìš”í•œê°€ìš”?
A: ì•„ë‹ˆì˜¤. í”„ë¡ì‹œ ì„œë²„ê°€ ëª¨ë“  ì¸ì¦ì„ ì²˜ë¦¬í•˜ë¯€ë¡œ API í‚¤ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

### Q: Rate Limitì´ ìˆë‚˜ìš”?
A: ë„¤. ë¶„ë‹¹ 300 ìš”ì²­ìœ¼ë¡œ ì œí•œë©ë‹ˆë‹¤. ì „ì ê²€ìƒ‰ ì‚¬ì´íŠ¸ì— ìµœì í™”ëœ ì„¤ì •ì…ë‹ˆë‹¤.

### Q: ìºì‹œëœ ë°ì´í„°ëŠ” ì–¼ë§ˆë‚˜ ì˜¤ë˜ ìœ ì§€ë˜ë‚˜ìš”?
A: ì‹¤ì‹œê°„ì„±ì„ ê°•í™”í•˜ì—¬ ê²Œì„ ê¸°ë¡ì€ 3ë¶„, ë­í‚¹/í†µê³„ëŠ” 5ë¶„, ë©”íƒ€ë°ì´í„°ëŠ” 30ë¶„ì…ë‹ˆë‹¤. ê²Œì„ ì§í›„ ìƒˆë¡œê³ ì¹¨ê³¼ API ë°˜ì˜ ì‹œê°„ì„ ëª¨ë‘ ê³ ë ¤í•œ ì„¤ì •ì…ë‹ˆë‹¤.

### Q: ì›ë³¸ APIì™€ í˜¸í™˜ë˜ë‚˜ìš”?
A: ë„¤. ì‘ë‹µ í˜•ì‹ê³¼ ë°ì´í„° êµ¬ì¡°ê°€ 100% ë™ì¼í•©ë‹ˆë‹¤.

### Q: ì–´ë–¤ ì–¸ì–´ë¥¼ ì§€ì›í•˜ë‚˜ìš”?
A: í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´(ê°„ì²´/ë²ˆì²´), í”„ë‘ìŠ¤ì–´, ë…ì¼ì–´, ëŸ¬ì‹œì•„ì–´ ë“± 15ê°œ ì–¸ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **ëŸ°íƒ€ì„**: Node.js 18 + Alpine Linux
- **í”„ë ˆì„ì›Œí¬**: Express.js
- **ìºì‹œ**: Redis + Memory Cache (ë‹¤ë‹¨ê³„)
- **í**: Bull Queue (Redis ê¸°ë°˜)
- **ë³´ì•ˆ**: Helmet, CORS, Rate Limiting
- **ì»¨í…Œì´ë„ˆ**: Docker + Docker Compose

## ğŸ“ˆ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

### ì‹¤ì œ ì¸¡ì • ê²°ê³¼
- **ìµœê³  ì„±ëŠ¥**: 3,195 RPS (ì´ˆë‹¹ ìš”ì²­)
- **í‰ê·  ì‘ë‹µ ì‹œê°„**: 6-8ms
- **ìºì‹œ íš¨ìœ¨**: 70%+ íˆíŠ¸ìœ¨
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 70MB (1000+ ìš”ì²­ ì²˜ë¦¬)
- **ê°€ìš©ì„±**: 99.9% ì—…íƒ€ì„

### ë¶€í•˜ í…ŒìŠ¤íŠ¸
```bash
# Apache Bench í…ŒìŠ¤íŠ¸
ab -n 1000 -c 20 https://your-domain.com/health

# ê²°ê³¼: 3000+ RPS, í‰ê·  6.6ms
```

## ğŸ›¡ï¸ ë³´ì•ˆ ê¸°ëŠ¥

- **ë³´ì•ˆ í—¤ë”**: CSP, HSTS, X-Frame-Options ë“±
- **Rate Limiting**: DDoS ë°©ì§€
- **ì…ë ¥ ê²€ì¦**: ëª¨ë“  íŒŒë¼ë¯¸í„° ìœ íš¨ì„± ê²€ì‚¬
- **ì—ëŸ¬ ë§ˆìŠ¤í‚¹**: ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ë°©ì§€
- **CORS ì •ì±…**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### í”„ë¡œë•ì…˜ ë°°í¬
1. ë„ë©”ì¸ ì„¤ì • ë° SSL ì¸ì¦ì„œ ì¤€ë¹„
2. `docker-compose.prod.yml` ì‚¬ìš©
3. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ ì„¤ì •
4. ëª¨ë‹ˆí„°ë§ ë° ì•ŒëŒ êµ¬ì„±

### ìŠ¤ì¼€ì¼ë§
- **ìˆ˜í‰ í™•ì¥**: ë¡œë“œ ë°¸ëŸ°ì„œ + ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤
- **ìˆ˜ì§ í™•ì¥**: CPU/ë©”ëª¨ë¦¬ ì¦ì„¤
- **ìºì‹œ í´ëŸ¬ìŠ¤í„°**: Redis Cluster êµ¬ì„±

## ğŸ“ ì§€ì› ë° ê¸°ì—¬

- **ì´ìŠˆ ë¦¬í¬íŠ¸**: [GitHub Issues](https://github.com/your-repo/issues)
- **ê¸°ëŠ¥ ì œì•ˆ**: Pull Request í™˜ì˜
- **ë¬¸ì„œ ê°œì„ **: ì˜¤íƒ€ ìˆ˜ì •, ì˜ˆì‹œ ì¶”ê°€ ë“±

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥

---

**ğŸ¯ BSER Cache Proxyë¡œ ë” ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ê²Œì„ ë°ì´í„° ì„œë¹„ìŠ¤ë¥¼ ê²½í—˜í•˜ì„¸ìš”!**